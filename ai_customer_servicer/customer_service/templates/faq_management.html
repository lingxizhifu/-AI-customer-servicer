{% load static %}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <title>FAQçŸ¥è¯†åº“ç®¡ç†æ¨¡å—</title>
    <link rel="stylesheet" href="{% static 'css/faq_management.css' %}">
</head>
<body>
    {% csrf_token %}
    {% include 'sidebar.html' with active_page='faq' %}
    <div class="container" id="main-container">
        <div class="main-content">
            <div class="page-header">
                <div class="header-left">
                    <span class="header-icon">ğŸ“š</span>
                    <h1 class="header-title">FAQçŸ¥è¯†åº“ç®¡ç†æ¨¡å—</h1>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="faqManager.exportFAQs()">
                        ğŸ“¤ Export
                    </button>
                    <button class="btn btn-primary" onclick="faqManager.showFAQModal()">
                        â• æ·»åŠ FAQ
                    </button>
                </div>
            </div>

            <!-- æœç´¢å’Œç­›é€‰åŒºåŸŸ -->
            <div class="search-section">
                <div class="search-row">
                    <div class="search-group">
                        <label class="search-label">å…³é”®è¯</label>
                        <input type="text" class="search-input" placeholder="æœç´¢é—®é¢˜æˆ–ç­”æ¡ˆ...">
                    </div>
                    <div class="search-group">
                        <label class="search-label">åˆ†ç±»ç­›é€‰</label>
                        <select class="search-select" id="categoryFilter">
                            <option value="">å…¨éƒ¨åˆ†ç±»</option>
                            <option value="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜</option>
                            <option value="æ³¨å†Œé—®é¢˜">æ³¨å†Œé—®é¢˜</option>
                            <option value="æ”¯ä»˜é—®é¢˜">æ”¯ä»˜é—®é¢˜</option>
                            <option value="è´¦æˆ·é—®é¢˜">è´¦æˆ·é—®é¢˜</option>
                            <option value="æŠ€æœ¯é—®é¢˜">æŠ€æœ¯é—®é¢˜</option>
                            <option value="å…¶ä»–é—®é¢˜">å…¶ä»–é—®é¢˜</option>
                        </select>
                    </div>
                    <div class="search-group">
                        <label class="search-label">çŠ¶æ€ç­›é€‰</label>
                        <select class="search-select" id="statusFilter">
                            <option value="">å…¨éƒ¨çŠ¶æ€</option>
                            <option value="active">å¯ç”¨</option>
                            <option value="inactive">ç¦ç”¨</option>
                        </select>
                    </div>
                    <div class="search-group">
                        <label class="search-label">&nbsp;</label>
                        <button class="btn btn-primary search-btn">ğŸ” æœç´¢</button>
                    </div>
                </div>
            </div>

            <!-- FAQè¡¨æ ¼ -->
            <div class="faq-table-container">
                <div class="table-header">
                    <div class="table-title">FAQåˆ—è¡¨</div>
                    <div class="table-stats">å…± <span id="total-count">0</span> æ¡è®°å½•</div>
                </div>
                
                <table class="faq-table">
                    <thead>
                        <tr>
                            <th>é—®é¢˜</th>
                            <th>åˆ†ç±»</th>
                            <th>çŠ¶æ€</th>
                            <th>åˆ›å»ºæ—¶é—´</th>
                            <th>æ›´æ–°æ—¶é—´</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- æ•°æ®é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </tbody>
                </table>

                <!-- åˆ†é¡µ -->
                <div class="pagination">
                    <div class="pagination-info">
                        æ˜¾ç¤ºç¬¬ 0-0 æ¡ï¼Œå…± 0 æ¡è®°å½•
                    </div>
                    <div class="pagination-controls">
                        <!-- åˆ†é¡µæŒ‰é’®é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥JavaScriptæ–‡ä»¶ -->
    <script src="{% static 'js/faq_management.js' %}"></script>
    
    <!-- ç¡®ä¿ç”¨æˆ·ç™»å½•æ£€æŸ¥å’Œå…¨å±€é”™è¯¯å¤„ç† -->
    <script>
        // æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
        if (!document.querySelector('meta[name="csrf-token"]') || !document.querySelector('[name=csrfmiddlewaretoken]')) {
            console.warn('CSRF token not found, please check if user is logged in');
        }
        
        // å…¨å±€é”™è¯¯å¤„ç†
        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
        });
        
        // å…¨å±€æœªå¤„ç†çš„Promiseæ‹’ç»å¤„ç†
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled promise rejection:', e.reason);
        });

        // æ£€æŸ¥æ˜¯å¦æœ‰ç”¨æˆ·ä¿¡æ¯
        console.log('å½“å‰ç”¨æˆ·:', '{{ user.username }}');
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„æ£€æŸ¥
        document.addEventListener('DOMContentLoaded', function() {
            console.log('FAQç®¡ç†é¡µé¢åŠ è½½å®Œæˆ');
        });
    </script>
</body>
</html>